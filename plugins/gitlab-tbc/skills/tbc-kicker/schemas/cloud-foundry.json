{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Cloud Foundry Template",
  "description": "to-be-continuous/cloud-foundry",
  "type": "object",
  "properties": {
    "inputs": {
      "type": "object",
      "description": "Valid inputs for Cloud Foundry template",
      "properties": {
        "cli-image": {
          "type": "string",
          "description": "The Docker image used to run CF CLI commands - set the version required by your Cloud Foundry server",
          "default": "docker.io/governmentpaas/cf-cli"
        },
        "manifest-basename": {
          "type": "string",
          "description": "CF manifest file basename (without extension nor env suffix)",
          "default": "manifest",
          "x-advanced": true
        },
        "url": {
          "type": "string",
          "description": "Global Cloud Foundry API url"
        },
        "org": {
          "type": "string",
          "description": "Global Cloud Foundry organization for project"
        },
        "default-domain": {
          "type": "string",
          "description": "Global Cloud Foundry default CF domain (only define if you want to use a different domain from CF default)",
          "x-advanced": true
        },
        "default-route-path": {
          "type": "string",
          "description": "Global Cloud Foundry default CF route path (only define if you want to add a route path to your application route)",
          "x-advanced": true
        },
        "default-push-args": {
          "type": "string",
          "description": "Global additional arguments for cf push command (only define if you want has a specific need not med by the template)",
          "x-advanced": true
        },
        "user": {
          "type": "string",
          "description": "Global Cloud Foundry username"
        },
        "password": {
          "type": "string",
          "description": "Global Cloud Foundry password"
        },
        "base-app-name": {
          "type": "string",
          "description": "Base application name",
          "default": "$CI_PROJECT_NAME",
          "x-advanced": true
        },
        "scripts-dir": {
          "type": "string",
          "description": "Directory where Cloud Foundry scripts (manifest, hook scripts) are located",
          "default": ".",
          "x-advanced": true
        },
        "rolling-strategy": {
          "type": "boolean",
          "description": "Use Cloud Foundry native zero-downtime deployment strategy instead of the historical blue-green method (ignores $CFXXXZERODOWNTIME)",
          "default": "false",
          "x-advanced": true
        },
        "review-org": {
          "type": "string",
          "description": "Cloud Foundry organization for review env (only define if different from global)",
          "x-feature": "Review"
        },
        "review-space": {
          "type": "string",
          "description": "Cloud Foundry space for review env",
          "x-feature": "Review"
        },
        "review-app-name": {
          "type": "string",
          "description": "The application name for review env (only define to override default)",
          "x-feature": "Review"
        },
        "review-host-name": {
          "type": "string",
          "description": "The review environment host name (defaults to $CFBASEAPPNAME-$CIENVIRONMENTSLUG)",
          "x-feature": "Review"
        },
        "review-domain": {
          "type": "string",
          "description": "The review environment domain",
          "x-feature": "Review"
        },
        "review-environment-scheme": {
          "type": "string",
          "description": "The review environment protocol scheme",
          "default": "https",
          "x-feature": "Review"
        },
        "review-environment-domain": {
          "type": "string",
          "description": "The review environment domain (ex: noprod-cloudfoundry.domain.com). By default review environment.url will be built as ${CFREVIEWENVIRONMENTSCHEME}://${$CIPROJECTNAME}-${CIENVIRONMENTSLUG}.${CFREVIEWE",
          "x-feature": "Review"
        },
        "review-route-path": {
          "type": "string",
          "description": "The review environment route path",
          "x-feature": "Review"
        },
        "review-push-args": {
          "type": "string",
          "description": "The review environment additional cf push arguments",
          "x-feature": "Review"
        },
        "review-domain-tmp": {
          "type": "string",
          "description": "The review environment domain for the temporary blue-green app",
          "x-feature": "Review"
        },
        "review-zerodowntime": {
          "type": "boolean",
          "description": "Enables zero-downtime deployment on review env",
          "x-feature": "Review"
        },
        "review-url": {
          "type": "string",
          "description": "Cloud Foundry API url for review env (only define to override default)",
          "x-feature": "Review"
        },
        "review-user": {
          "type": "string",
          "description": "Cloud Foundry API username for review env (only define to override default)",
          "x-feature": "Review"
        },
        "review-password": {
          "type": "string",
          "description": "Cloud Foundry API password for review env (only define to override default)",
          "x-feature": "Review"
        },
        "cleanup-all-review": {
          "type": "string",
          "enum": [
            "",
            "force",
            "true"
          ],
          "description": "Enables a manual job to cleanup all review envs at once. You may also use it to schedule cloud resources cleanup. See documentation.",
          "x-feature": "Review"
        },
        "review-retired-app-suffix": {
          "type": "string",
          "description": "If set, the app old version is not deleted/overriden but renamed with this suffix",
          "x-feature": "Review"
        },
        "integ-org": {
          "type": "string",
          "description": "Cloud Foundry organization for integration env (only define if different from global)",
          "x-feature": "Integration"
        },
        "integ-space": {
          "type": "string",
          "description": "Cloud Foundry space for integration env",
          "x-feature": "Integration"
        },
        "integ-app-name": {
          "type": "string",
          "description": "The application name for integration env (only define to override default)",
          "x-feature": "Integration"
        },
        "integ-host-name": {
          "type": "string",
          "description": "The integration environment host name (defaults to $CFBASEAPPNAME-integration)",
          "x-feature": "Integration"
        },
        "integ-domain": {
          "type": "string",
          "description": "The integration environment domain",
          "x-feature": "Integration"
        },
        "integ-route-path": {
          "type": "string",
          "description": "The integration environment route path",
          "x-feature": "Integration"
        },
        "integ-push-args": {
          "type": "string",
          "description": "The integration environment additional cf push arguments",
          "x-feature": "Integration"
        },
        "integ-domain-tmp": {
          "type": "string",
          "description": "The integration environment domain for the temporary blue-green app",
          "x-feature": "Integration"
        },
        "integ-environment-url": {
          "type": "string",
          "description": "The integration environment url including scheme (ex: https://my-application-integration.noprod-cloudfoundry.domain.com). Do not use variable inside variable definition as it will result in a two leve",
          "x-feature": "Integration"
        },
        "integ-zerodowntime": {
          "type": "boolean",
          "description": "Enables zero-downtime deployment on integration env",
          "x-feature": "Integration"
        },
        "integ-url": {
          "type": "string",
          "description": "Cloud Foundry API url for integration env (only define to override default)",
          "x-feature": "Integration"
        },
        "integ-user": {
          "type": "string",
          "description": "Cloud Foundry API username for integration env (only define to override default)",
          "x-feature": "Integration"
        },
        "integ-password": {
          "type": "string",
          "description": "Cloud Foundry API password for integration env (only define to override default)",
          "x-feature": "Integration"
        },
        "integ-retired-app-suffix": {
          "type": "string",
          "description": "If set, the app old version is not deleted/overriden but renamed with this suffix",
          "x-feature": "Integration"
        },
        "staging-org": {
          "type": "string",
          "description": "Cloud Foundry organization for staging env (only define if different from global)",
          "x-feature": "Staging"
        },
        "staging-space": {
          "type": "string",
          "description": "Cloud Foundry space for staging env",
          "x-feature": "Staging"
        },
        "staging-app-name": {
          "type": "string",
          "description": "The application name for staging env (only define to override default)",
          "x-feature": "Staging"
        },
        "staging-host-name": {
          "type": "string",
          "description": "The staging environment host name (defaults to $CFBASEAPPNAME-staging)",
          "x-feature": "Staging"
        },
        "staging-domain": {
          "type": "string",
          "description": "The staing environment domain",
          "x-feature": "Staging"
        },
        "staging-route-path": {
          "type": "string",
          "description": "The staging environment route path",
          "x-feature": "Staging"
        },
        "staging-push-args": {
          "type": "string",
          "description": "The staging environment additional cf push arguments",
          "x-feature": "Staging"
        },
        "staging-domain-tmp": {
          "type": "string",
          "description": "The staging environment domain for the temporary blue-green app",
          "x-feature": "Staging"
        },
        "staging-environment-url": {
          "type": "string",
          "description": "The staging environment url including scheme (ex: https://my-application-staging.noprod-cloudfoundry.domain.com). Do not use variable inside variable definition as it will result in a two level cascad",
          "x-feature": "Staging"
        },
        "staging-zerodowntime": {
          "type": "boolean",
          "description": "Enables zero-downtime deployment on staging env",
          "x-feature": "Staging"
        },
        "staging-url": {
          "type": "string",
          "description": "Cloud Foundry API url for staging env (only define to override default)",
          "x-feature": "Staging"
        },
        "staging-user": {
          "type": "string",
          "description": "Cloud Foundry API username for staging env (only define to override default)",
          "x-feature": "Staging"
        },
        "staging-password": {
          "type": "string",
          "description": "Cloud Foundry API password for staging env (only define to override default)",
          "x-feature": "Staging"
        },
        "staging-retired-app-suffix": {
          "type": "string",
          "description": "If set, the app old version is not deleted/overriden but renamed with this suffix",
          "x-feature": "Staging"
        },
        "prod-org": {
          "type": "string",
          "description": "Cloud Foundry organization for production env (only define if different from global)",
          "x-feature": "Production"
        },
        "prod-space": {
          "type": "string",
          "description": "Cloud Foundry space for production env",
          "x-feature": "Production"
        },
        "prod-app-name": {
          "type": "string",
          "description": "The application name for production env (only define to override default)",
          "x-feature": "Production"
        },
        "prod-host-name": {
          "type": "string",
          "description": "The production environment host name (defaults to $CFBASEAPPNAME)",
          "x-feature": "Production"
        },
        "prod-domain": {
          "type": "string",
          "description": "The production environment domain",
          "x-feature": "Production"
        },
        "prod-route-path": {
          "type": "string",
          "description": "The production environment route path",
          "x-feature": "Production"
        },
        "prod-push-args": {
          "type": "string",
          "description": "The production environment additional cf push arguments",
          "x-feature": "Production"
        },
        "prod-domain-tmp": {
          "type": "string",
          "description": "The production environment domain for the temporary blue-green app",
          "x-feature": "Production"
        },
        "prod-environment-url": {
          "type": "string",
          "description": "The production environment url including scheme (ex: https://my-application.cloudfoundry.domain.com). Do not use variable inside variable definition as it will result in a two level cascade variable a",
          "x-feature": "Production"
        },
        "prod-deploy-strategy": {
          "type": "string",
          "enum": [
            "manual",
            "auto"
          ],
          "description": "Defines the deployment to production strategy.",
          "default": "manual",
          "x-feature": "Production"
        },
        "prod-zerodowntime": {
          "type": "boolean",
          "description": "Enables zero-downtime deployment on production env",
          "default": "true",
          "x-feature": "Production"
        },
        "prod-url": {
          "type": "string",
          "description": "Cloud Foundry API url for production env (only define to override default)",
          "x-feature": "Production"
        },
        "prod-user": {
          "type": "string",
          "description": "Cloud Foundry API username for production env (only define to override default)",
          "x-feature": "Production"
        },
        "prod-password": {
          "type": "string",
          "description": "Cloud Foundry API password for production env (only define to override default)",
          "x-feature": "Production"
        },
        "prod-retired-app-suffix": {
          "type": "string",
          "description": "If set, the app old version is not deleted/overriden but renamed with this suffix",
          "x-feature": "Production"
        },
        "tbc-vault-image": {
          "type": "string",
          "description": "The Vault Secrets Provider image to use",
          "default": "registry.gitlab.com/to-be-continuous/tools/vault-secrets-provider:master",
          "x-variant": "Vault"
        },
        "vault-base-url": {
          "type": "string",
          "description": "The Vault server base API url",
          "x-variant": "Vault"
        },
        "vault-oidc-aud": {
          "type": "string",
          "description": "The aud claim for the JWT",
          "default": "$CI_SERVER_URL",
          "x-variant": "Vault"
        },
        "vault-role-id": {
          "type": "string",
          "description": "The AppRole RoleID",
          "x-variant": "Vault"
        },
        "vault-secret-id": {
          "type": "string",
          "description": "The AppRole SecretID",
          "x-variant": "Vault"
        }
      },
      "additionalProperties": false
    }
  },
  "_meta": {
    "prefix": "CF_",
    "kind": "hosting",
    "is_component": true,
    "features": [
      "Review",
      "Integration",
      "Staging",
      "Production"
    ],
    "variants": [
      "Vault"
    ],
    "variable_count": 76
  }
}